<!DOCTYPE html>
<html>
<head>
  <title>Content Encryption Tool</title>
  <style>
    body { font-family: sans-serif; }
    #encryptionTool { max-width: 600px; margin: 0 auto; padding: 20px; }
    textarea { width: 100%; height: 200px; margin-bottom: 10px; }
    button { padding: 8px 15px; }
  </style>
</head>
<body>

<div id="encryptionTool">
  <h2>Content Encryption Tool</h2>

  <label for="inputKey">Encryption Key (default: 4444):</label>
  <input type="text" id="inputKey" value="4444">

  <label for="inputContent">Content to Encrypt:</label>
  <textarea id="inputContent">
<!DOCTYPE html>
<html>
<head>
  <title>Mobleysoft Consulting Engagement for Consero: Phase 1 Assessment</title>
  <style>
    /* Basic Styling */
    body { font-family: sans-serif; } 
    #app { max-width: 960px; margin: 0 auto; padding: 20px; display: none; } /* Initially hidden */
    #decryptForm { display: flex; margin-bottom: 20px; }
    #decryptInput { flex: 1; margin-right: 10px; padding: 8px; }
  </style>
</head>
<body>
  <div id="decryptForm">
    <input type="text" id="decryptInput" placeholder="Enter decryption code">
    <button id="decryptButton">Decrypt</button>
  </div>

  <div id="app">
    <header><h1>Phase 1 Assessment and Recommendations for Consero</h1></header>
    <main>
      <section id="website">
        <h2>Website Migration Assessment</h2>
        <p>[Your detailed assessment of the current website and recommendations for Azure migration and Git setup]</p>
      </section>
      <section id="crm">
        <h2>CRM Evaluation</h2>
        <p>[Your comparative analysis of Act! and Microsoft Dynamics 365 Sales, including custom SharePoint/Power Automate consideration]</p>
      </section>
      <section id="cloud">
        <h2>Cloud Collaboration Assessment</h2>
        <p>[Your recommendations for Microsoft 365/Teams, SharePoint structure, and Power Automate workflows]</p>
      </section>
      <section id="laptop">
        <h2>Secure Laptop Configuration</h2>
        <p>[Your recommendations for secure laptop configuration for contractors]</p>
      </section>
    </main>
    <footer><p>&copy; 2024 Mobleysoft</p></footer>
  </div>
</textarea>

  <br>

  <label for="outputContent">Encrypted Content:</label>
  <textarea id="outputContent" readonly></textarea>

  <button id="encryptButton">Encrypt</button>
</div>

<script>
  const inputKey = document.getElementById('inputKey');
  const inputContent = document.getElementById('inputContent');
  const outputContent = document.getElementById('outputContent');

  async function encryptContent(content, key) {
    const encoder = new TextEncoder();
    const data = encoder.encode(content);
    const keyData = encoder.encode(key); 

    const importedKey = await crypto.subtle.importKey(
      "raw", keyData, {name: "HMAC", hash: "SHA-256"}, false, ["sign"]
    );
    
    const signature = await crypto.subtle.sign("HMAC", importedKey, data);
    const signatureArray = Array.from(new Uint8Array(signature));

    return btoa(signatureArray.map(b => String.fromCharCode(b)).join('')) 
  }

  function updateEncryptedContent() {
    encryptContent(inputContent.value, inputKey.value)
      .then(encrypted => {
        outputContent.value = encrypted;
      })
      .catch(error => {
        console.error('Encryption error:', error);
        outputContent.value = "Error encrypting content";
      });
  }

  inputKey.addEventListener('input', updateEncryptedContent);
  inputContent.addEventListener('input', updateEncryptedContent);

  // Initial encryption
  updateEncryptedContent();

  // Make the encrypted content copyable
  outputContent.addEventListener('click', () => {
    outputContent.select();
    document.execCommand('copy');
  });
</script>

</body>
</html>

